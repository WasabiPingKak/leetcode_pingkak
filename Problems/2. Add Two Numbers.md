# 2. Add Two Numbers

## è§£ç­”å½±ç‰‡
[ã€LeetCodeã€‘02. Add Two Numbers | å¤¢é–‹å§‹çš„åœ°æ–¹ | C++ | åœ–è§£ | ğŸ”°Linked list å­¸æ­¥é¡Œ | Dummy node](https://www.youtube.com/watch?v=iokJW7xDln0)

## åŸé¡Œç›®é€£çµ
[2. Add Two Numbers](https://leetcode.com/problems/add-two-numbers/description/)

## é¡Œæ„
çµ¦ä½ å…©å€‹éç©ºçš„éˆçµä¸²åˆ—(Linked-list)ï¼Œä»¥ååºè¡¨ç¤ºä¸€å€‹éè² çš„æ•´æ•¸ï¼Œæ¯ä¸€å€‹ç¯€é»åªæœ‰ä¸€å€‹å€‹ä½æ•¸ã€‚

è«‹ä½ ç®—å‡ºé€™å…©å€‹ç”±ååº Linked-list è¡¨ç¤ºçš„æ•¸çš„å’Œï¼Œç„¶å¾Œç”¨ç›¸åŒçš„å½¢å¼å›å‚³ã€‚

ä½ å¯ä»¥å‡è¨­é™¤äº† 0 é€™å€‹æ•¸æœ¬èº«ï¼Œå…¶ä»–æ•¸å­—ä¸æœƒæœ‰é¡å¤–çš„å‰å°é›¶ã€‚

## Example
```
Example 1:
Input: l1 = [2,4,3], l2 = [5,6,4]
Output: [7,0,8]
Explanation: 342 + 465 = 807.

Example 2:
Input: l1 = [0], l2 = [0]
Output: [0]

Example 3:
Input: l1 = [9,9,9,9,9,9,9], l2 = [9,9,9,9]
Output: [8,9,9,9,0,0,0,1]
```

## éˆçµä¸²åˆ— (Linked-list)
Linked-list æ˜¯ä¸€å€‹éå¸¸åŸºæœ¬çš„è³‡æ–™çµæ§‹ï¼Œå¸¸å¸¸æœƒèˆ‡é™£åˆ—(array)é€™å€‹è³‡æ–™çµæ§‹åšæ¯”è¼ƒã€‚

Array çš„è³‡æ–™é †åºæ˜¯ç·šæ€§çš„ï¼Œä¸¦ä¸”æœƒä»¥é€£çºŒçš„é †åºå°‡è³‡æ–™å­˜æ”¾åœ¨è¨˜æ†¶é«”å…§ã€‚

Linked-list çš„è³‡æ–™é †åºä¹Ÿæ˜¯ç·šæ€§çš„ï¼Œä½†æ˜¯è³‡æ–™æœªå¿…æœƒä»¥ç·šæ€§çš„é †åºå­˜æ”¾åœ¨è¨˜æ†¶é«”ä¸­ã€‚

Linked-list çš„ç¯€é»å…§æœƒå­˜æ”¾æŒ‡å‘ä¸‹ä¸€å€‹è³‡æ–™ç¯€é»çš„***æŒ‡æ¨™(pointer)***ã€‚

### â€»â€»â€» ä½ å¿…é ˆè¦å…ˆæ‡‚ä»€éº¼æ˜¯ C/C++ çš„ ***æŒ‡æ¨™(pointer)***ï¼Œæ‰èƒ½ç¹¼çºŒå¾€ä¸‹è®€ â€»â€»â€»
é€™è£¡ä¸æ•™ä½ ä»€éº¼æ˜¯æŒ‡æ¨™ã€‚

é€šå¸¸æ¯ä¸€å€‹ç¯€é»çš„å…§å®¹æœƒé•·å¾—åƒä¸‹é¢é€™æ¨£ï¼šè³‡æ–™æœ¬èº«(***val***)èˆ‡æŒ‡å‘ä¸‹ä¸€å€‹ç¯€é»è¨˜æ†¶é«”ä½ç½®çš„æŒ‡æ¨™(***\*next***)
```c++
// Definition for singly-linked list.
struct ListNode {
    int val;
    ListNode *next;
};
```

ç„¶å¾Œ LeetCode ç·¨è¼¯å€çµ¦ä½ çš„è¨»è§£æè¿°äº†å®ƒæ€éº¼å®šç¾© ListNode çš„çµæ§‹
```c++
// Definition for singly-linked list.
struct ListNode {
    int val;
    ListNode *next;

    ListNode() : val(0), next(nullptr) {}
    ListNode(int x) : val(x), next(nullptr) {}
    ListNode(int x, ListNode *next) : val(x), next(next) {}
};
```

å¾Œé¢çš„ä¸‰å€‹æ±è¥¿`ListNode()`, `ListNode(int x)`, `ListNode(int x, ListNode *next)` æ˜¯é€™å€‹ Linked-list çš„å»ºæ§‹å­(constructor)ï¼Œä»£è¡¨ä½ å¯ä»¥ç”¨é€™ä¸‰ç¨®æ–¹æ³•å»åˆå§‹åŒ–ä¸€å€‹ `ListNode`ã€‚

ç”¨æ³•åˆ†åˆ¥æ˜¯ï¼š
1. `ListNode()` ä¸å¸¶åƒæ•¸ï¼š

   è‹¥ä½ ä½¿ç”¨äº†ä¸å¸¶åƒæ•¸çš„å»ºæ§‹å­ï¼Œå‰‡é€™å€‹ `ListNode` è¢«åˆå§‹åŒ–çš„æ™‚å€™æœƒå°‡ `val` è¨­ç‚º `0`, `next` è¨­ç‚º `nullptr`ã€‚
   ```c++
   ListNode *ptr_a = new ListNode();
   ```
   ä½ å®£å‘Šäº†ä¸€å€‹æŒ‡å‘ `ListNode` çµæ§‹çš„æŒ‡æ¨™ `ptr_a`ï¼ŒæŒ‡å‘ä¸€å€‹ä¸å¸¶åƒæ•¸çš„å»ºæ§‹å­æ‰€å»ºæ§‹çš„ç¯€é»ï¼Œå®ƒçš„ `val` ç‚º `0`ï¼Œä¸”ä¸‹ä¸€å€‹æŒ‡æ¨™æŒ‡å‘ `nullptr` çš„ç¯€é»ã€‚


2. `ListNode(int x)` å¸¶ä¸€å€‹ `int` åƒæ•¸ï¼š

   è‹¥ä½ ä½¿ç”¨äº†å¸¶ä¸€å€‹ `int` åƒæ•¸çš„å»ºæ§‹å­ï¼Œå‰‡é€™å€‹ `ListNode` è¢«åˆå§‹åŒ–çš„æ™‚å€™æœƒå°‡ `val` è¨­ç‚º `x`, `next` è¨­ç‚º `nullptr`ã€‚
   ```c++
   ListNode *ptr_b = new ListNode(114514);
   ```

   ä½ å®£å‘Šäº†ä¸€å€‹æŒ‡å‘ `ListNode` çµæ§‹çš„æŒ‡æ¨™ `ptr_b`ï¼ŒæŒ‡å‘ä¸€å€‹å¸¶ `int` åƒæ•¸çš„å»ºæ§‹å­æ‰€å»ºæ§‹çš„ç¯€é»ï¼Œå®ƒçš„ `val` ç‚º `114514`ï¼Œä¸”ä¸‹ä¸€å€‹æŒ‡æ¨™æŒ‡å‘ `nullptr` çš„ç¯€é»ã€‚

3. `ListNode(int x, ListNode *next)` å¸¶ä¸€å€‹ `int` åƒæ•¸èˆ‡ä¸€å€‹æŒ‡æ¨™åƒæ•¸ `next`ï¼š

   è‹¥ä½ ä½¿ç”¨äº†å¸¶ä¸€å€‹ `int` åƒæ•¸çš„å»ºæ§‹å­ï¼Œå‰‡é€™å€‹ `ListNode` è¢«åˆå§‹åŒ–çš„æ™‚å€™æœƒå°‡ `val` è¨­ç‚º `x`, çµæ§‹å…§çš„ `next` è®Šæ•¸è¨­ç‚ºåƒæ•¸æä¾›çš„ `next`ã€‚
   ```c++
   ListNode *ptr_c = new ListNode(1919810893, ptr_a);
   ```
   ä½ å®£å‘Šäº†ä¸€å€‹æŒ‡å‘ `ListNode` çµæ§‹çš„æŒ‡æ¨™ `ptr_c`ï¼ŒæŒ‡å‘ä¸€å€‹å¸¶ `int` åƒæ•¸çš„å»ºæ§‹å­æ‰€å»ºæ§‹çš„ç¯€é»ï¼Œå®ƒçš„ `val` ç‚º `1919810893`ï¼Œä¸”ä¸‹ä¸€å€‹æŒ‡æ¨™æŒ‡å‘ `ptr_a` æ‰€æŒ‡å‘çš„ç¯€é»ã€‚

## è§£æ³•
æ¨¡æ“¬å…©å€‹æ•´æ•¸çš„ç›´å¼åŠ æ³•ï¼Œé å³å°é½Šï¼Œä½†é¡Œç›®å·²ç¶“å°‡æ¯ä¸€ä½çš„æ•¸å€¼ååºå­˜åœ¨ Linked-listï¼Œä¹Ÿå°±æ˜¯å·²ç¶“å°é½Šäº†ï¼ŒæŒ‰ç…§é †åºæŠŠæ¯ä¸€å€‹ `ListNode` å…§çš„å€¼åŠ èµ·ä¾†å³å¯ï¼Œè¶…é `10` çš„å€¼é€²ä½åˆ°ä¸‹ä¸€å€‹ç¯€é»ï¼Œå› ç‚ºæ¯ä¸€å€‹ç¯€é»åªä»£è¡¨ä¸€å€‹ä½æ•¸ã€‚

éœ€è¦åˆ¤æ–·çš„å¹¾å€‹åœ°æ–¹ç‚ºç•¶å…©å€‹ List ä¸ç­‰é•·çš„æ™‚å€™ï¼Œèˆ‡æœ€å¾Œä¸€ä½åŠ å®Œé‚„è¦é€²ä½çš„æ™‚å€™ï¼Œéœ€è¦é¡å¤–å¢åŠ ä¸€å€‹ç¯€é»ã€‚

```c++
class Solution {
public:
    ListNode* addTwoNumbers(ListNode* l1, ListNode* l2) {
        // åˆ†åˆ¥å®£å‘Šå…©å€‹æŒ‡æ¨™ï¼ŒæŒ‡å‘å‚³å…¥çš„ Linked-list çš„é–‹é ­
        auto *p = l1;
        auto *q = l2;

        // å®£å‘Šä¸€å€‹ answer_head çš„æŒ‡æ¨™ï¼Œæº–å‚™ç”¨ä¾†æŒ‡å‘å­˜æ”¾ç­”æ¡ˆçš„ Linked-list çš„é–‹é ­
        ListNode *answer_head = nullptr;
        // å®£å‘Šä¸€å€‹æŒ‡æ¨™æŒ‡å‘ answer_head é€™å€‹ Listï¼Œç”¨æ–¼å¾ŒçºŒçš„æ“ä½œ
        auto *r = answer_head;

        // å®£å‘Šä¸€å€‹è®Šæ•¸å­˜æ”¾é€²ä½
        int carry = 0;

        while (p != nullptr || q != nullptr || carry != 0) {
            // ç•¶æŒ‡å‘è¼¸å…¥çš„ list æŒ‡æ¨™ p æˆ– q æ²’æœ‰èµ°åˆ°ç›¡é ­æ™‚ï¼Œç¹¼çºŒåšåŠ æ³•
            // å¦‚æœå…©å€‹ list ä¸ç­‰é•·ï¼Œå‰‡æ¯”è¼ƒçŸ­çš„é‚£ä¸€å€‹æœƒå…ˆé‡åˆ° nullptr
            // ä»¤é€™å€‹æ¯”è¼ƒçŸ­çš„ç‚º 0
            // FYI: é€™è£¡ç”¨åˆ°äº†ä¸‰å…ƒé‹ç®—å­(Ternary Operator)
            int p_val = (p == nullptr) ? 0 : p->val;
            int q_val = (q == nullptr) ? 0 : q->val;

            // ç›´å¼åŠ æ³•
            int digit_sum = p_val + q_val + carry;
            // è¨ˆç®—é€²ä½
            carry = digit_sum / 10;
            // ä¿ç•™å€‹ä½æ•¸
            digit_sum %= 10;

            // å°‡è¨ˆç®—å®Œçš„çµæœ(digit_sum)æ”¾å…¥ç­”æ¡ˆçš„ ListNode ä¸­
            if (r == nullptr) {
                // å¦‚æœæ­¤æ™‚ r æ˜¯ç©ºæŒ‡æ¨™ï¼Œä»£è¡¨é€™æ˜¯ List çš„ Head
                // åœ¨è¨˜æ†¶é«”ä¸­å»ºæ§‹ä¸€å€‹ Head ç¯€é»
                r = new ListNode(digit_sum);
                answer_head = r;
            } else {
                // å¦‚æœ r ä¸æ˜¯ç©ºæŒ‡æ¨™ï¼Œä»£è¡¨å®ƒæŒ‡å‘ç›®å‰å­˜æ”¾ç­”æ¡ˆçš„ list æœ€å‰é¢ä¸€ä½
                // å»ºæ§‹ä¸€å€‹æ–°çš„ ListNode å­˜æ”¾é€™ä¸€è¼ªè¨ˆç®—çš„çµæœ
                // ç„¶å¾ŒæŠŠå®ƒæ¥åœ¨ r æŒ‡å‘çš„ä¸‹ä¸€å€‹ç¯€é»
                r->next = new ListNode(digit_sum);
                // r é€™å€‹æŒ‡æ¨™å¾€å‰é€²ä¸€ä½
                r = r->next;
            }

            // åˆ¤æ–·å…©å€‹è¼¸å…¥çš„ list æŒ‡æ¨™æœ‰æ²’æœ‰èµ°åˆ°ç›¡é ­
            // æ²’æœ‰çš„è©±å°±å‰é€²ä¸€ä½
            if (p != nullptr) p = p->next;
            if (q != nullptr) q = q->next;
        }

        // å›å‚³ç­”æ¡ˆï¼Œanswer_head æœƒæŒ‡å‘ä½ å‰é¢ç”¨ä¾†å­˜æ”¾ç­”æ¡ˆçš„ list çš„é–‹é ­
        return answer_head;
    }
};
```

## Dummy Head
ç”±æ–¼åœ¨ answer_head å»ºæ§‹ä¸€å€‹ `head` ç¯€é»é€™ä»¶äº‹åªæœƒç™¼ç”Ÿä¸€æ¬¡ï¼Œå…¶å¯¦ä¸¦æ²’æœ‰å¿…è¦åœ¨è¿´åœˆå…§æ¯ä¸€æ¬¡éƒ½é€²è¡Œåˆ¤æ–·ã€‚

é€šå¸¸æˆ‘å€‘å°å–®å‘çš„ Linked-list é€²è¡Œæ“ä½œçš„æ™‚å€™ï¼Œæœƒä½¿ç”¨ä¸€å€‹å«ä½œ dummy head çš„æŠ€å·§ï¼Œä¹Ÿå°±æ˜¯åœ¨ `head` ç¯€é»çš„å‰é¢æ·»åŠ ä¸€å€‹è™›æ“¬çš„ç¯€é»ï¼Œç°¡åŒ–ç¨‹å¼çš„æ“ä½œé‚è¼¯ã€‚

Dummy head å°±åƒå¹¾ä½•ä½œåœ–ä¸­çš„è¼”åŠ©ç·šä¸€æ¨£ï¼Œå¯ä»¥è®“ä½ çš„ç¨‹å¼é‚è¼¯åœ¨éç¨‹ä¸­è®Šå¾—ä¹¾æ·¨ï¼Œä¸ç”¨é‡å° `head` ç¯€é»åšé‚Šç•Œè™•ç†ï¼Œç”¨å®Œè¨˜å¾—æ“¦æ‰å°±å¥½ã€‚

æˆ‘å€‘é€é dummy head ä¾†ç°¡åŒ–ä¸Šé¢éœ€è¦é‡å° `head` åšé‚Šç•Œè™•ç†çš„æ“ä½œï¼š
```c++
class Solution {
public:
    ListNode* addTwoNumbers(ListNode* l1, ListNode* l2) {
        auto* p = l1;
        auto* q = l2;
        // ä½¿ç”¨å€åŸŸè®Šæ•¸çš„æ–¹å¼å»ºç«‹ dummy head
        ListNode dummy_head;
        auto* r = &dummy_head;

        int carry = 0;

        while (p != nullptr || q != nullptr || carry != 0) {
            int p_val = (p == nullptr) ? 0 : p->val;
            int q_val = (q == nullptr) ? 0 : q->val;

            int digit_sum = p_val + q_val + carry;
            carry = digit_sum / 10;
            digit_sum %= 10;

            // ç°¡åŒ–æ–°å¢ç¯€é»çš„é‚è¼¯
            // æœ‰äº† dummy head ä¹‹å¾Œæ‰€æœ‰çš„ç¯€é»éƒ½æ˜¯ä¸²åœ¨ next å¾Œé¢å³å¯
            r->next = new ListNode(digit_sum);
            r = r->next;

            if (p != nullptr)
                p = p->next;
            if (q != nullptr)
                q = q->next;
        }

        // é›¢é–‹é€™å€‹å‡½å¼é€™ä½œç”¨åŸŸä¹‹å¾Œ
        // å€åŸŸè®Šæ•¸çš„ dummy head å°±æœƒè‡ªå‹•è¢«éŠ·æ¯€
        // ä¸éœ€è¦æ‰‹å‹• delete
        //
        // è€ŒçœŸæ­£çš„ head æ˜¯ dummy_head çš„ä¸‹ä¸€å€‹ç¯€é»
        return dummy_head.next;
    }
};
```
